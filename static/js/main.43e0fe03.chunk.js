(this.webpackJsonpviade_0=this.webpackJsonpviade_0||[]).push([[0],{1042:function(e,t){},1044:function(e,t){},1085:function(e,t){},1088:function(e,t){},1097:function(e,t){},1098:function(e,t){},1102:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),i=a(74),o=a.n(i),s=a(35),c=(a(576),a(1118)),u=a(1119),l=a(1110),d=a(67),m=(a(577),a(554)),p=a(264),f=function(e,t){return{type:"SHARE_ROUTE",payload:{route:e,friends:t}}},h=function(e){return{type:"SHOW_ROUTE",payload:e}},E=a(44),b=a(2),g=a.n(b),v=a(16),y=a(66),x=a.n(y);function O(){return _.apply(this,arguments)}function _(){return(_=Object(v.a)(g.a.mark((function e(){var t;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.a.currentSession();case 2:if(!(t=e.sent)){e.next=5;break}return e.abrupt("return",t.webId);case 5:return e.abrupt("return",t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=a(1109),R={green:{"--color-secondary":"white","--color-primary":"#008080","--color-tertiary":"white",name:"Green"},dark:{"--color-secondary":"#CCCCCC","--color-primary":"#202020","--color-tertiary":"white",name:"Dark"},red:{"--color-secondary":"white","--color-primary":"#E85165","--color-tertiary":"white",name:"Red"},purple:{"--color-secondary":"white","--color-primary":"#A875FF","--color-tertiary":"white",name:"Purple"},yellow:{"--color-secondary":"black","--color-primary":"#FFEE5E","--color-tertiary":"black",name:"Yellow"},pink:{"--color-secondary":"black","--color-primary":"#FF65C7","--color-tertiary":"black",name:"Pink"},lightBlue:{"--color-secondary":"black","--color-primary":"#82A2FF","--color-tertiary":"black",name:"Light Blue"},lightGreen:{"--color-secondary":"black","--color-primary":"#BDF600","--color-tertiary":"black",name:"Light Green"},lightOrange:{"--color-secondary":"white","--color-primary":"#FF8E54","--color-tertiary":"white",name:"Ligh Orange"},deuteranopia:{"--color-secondary":"#1A1A1A","--color-primary":"#FFFC61","--color-tertiary":"#1A1A1A",name:"Deuteranopia"},protanopia:{"--color-secondary":"#022397","--color-primary":"#FFFC61","--color-tertiary":"#022397",name:"Protanopia"},tritanopia:{"--color-secondary":"#FFEBF0","--color-primary":"#91012D","--color-tertiary":"#FFEBF0",name:"Tritanopia"}},j=Object(n.createContext)({theme:R.lightOrange,setTheme:function(e){}}),w=a(550),S=a.n(w),C=a(94),L=function(){var e=Object(n.useContext)(j),t=e.theme,a=e.changeTheme,i=Object.keys(R).map((function(e,t){return r.a.createElement(C.a.Item,{key:t,onClick:function(){return a(R[e])}},R[e].name)}));return r.a.createElement(C.a,{className:S.a.picker},r.a.createElement(C.a.Toggle,{variant:"success",id:"dropdown-basic"},r.a.createElement(k.a,{id:"Themes"}),": ",t.name),r.a.createElement(C.a.Menu,null,i))},T=a(55),N=a(553),A=a.n(N),I=a(340);function D(e,t){var a={"@context":{"@version":1.1,xsd:"http://www.w3.org/2001/XMLSchema#",schema:"http://schema.org/",users:{"@container":"@list","@id":"schema:person"},url:{"@type":"xs:string","@id":"schema:url"}},name:e,users:[]};return t.forEach((function(e){return a.users.push({url:e})})),a}function F(e){var t={name:e.name,friends:[]};return e.users.forEach((function(e){return t.friends.push(e.url)})),t}function U(e,t,a){return{"@context":{"@version":1.1,as:"https://www.w3.org/ns/activitystreams#",viade:"http://arquisoft.github.io/viadeSpec/",notification:{"@id":"as:Offer"}},notification:{actor:{type:"Person",name:t},object:{type:"viade:route",uri:e},target:{type:"Person",name:a}}}}function M(e){return{"@context":{"@version":1.1,viade:"http://arquisoft.github.io/viadeSpec/",schema:"http://schema.org/",comments:{"@container":"@list","@id":"viade:comments"}},routeUri:e,comments:[]}}function P(e,t,a,n,r){return{author:e,text:t,dateCreated:a+"-"+n+"-"+r}}function G(e,t,a){return{"@context":{"@version":"1.1",comments:{"@id":"viade:comments","@container":"@list"},description:{"@id":"schema:description","@type":"xsd:string"},media:{"@container":"@list","@id":"viade:media"},name:{"@id":"schema:name","@type":"xsd:string"},points:{"@container":"@list","@id":"viade:points"},latitude:{"@id":"schema:latitude","@type":"xsd:double"},longitude:{"@id":"schema:longitude","@type":"xsd:double"},elevation:{"@id":"schema:elevation","@type":"xsd:double"},author:{"@id":"schema:author","@type":"@id"},rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",viade:"http://arquisoft.github.io/viadeSpec/",xsd:"http://www.w3.org/2001/XMLSchema#"},name:e.name,author:e.author,description:e.description,media:[],comments:ie(t,a),waypoints:[],points:e.positions.map((function(e){return{latitude:e[0],longitude:e[1]}}))}}function W(e){return"\n\n@prefix acl: <http://www.w3.org/ns/auth/acl#>.\n@prefix foaf: <http://xmlns.com/foaf/0.1/>.\n<#owner>\n    a acl:Authorization;\n    acl:agent\n        <"+(e.split("/viade")[0]+"/profile/card#me")+">;\n    acl:accessTo <./>;\n    acl:default <./>;\n    acl:mode\n        acl:Read, acl:Write, acl:Control."}function B(e,t){return H.apply(this,arguments)}function H(){return(H=Object(v.a)(g.a.mark((function e(t,a){var n,r,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,t.readFile(a.url);case 3:return e.t1=e.sent,n=e.t0.parse.call(e.t0,e.t1),r=n.notification.actor.name,i=(i=n.notification.object.uri.split("/"))[i.length-1],e.abrupt("return",{text:r+" has shared "+i+" with you"});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var q=a(588),J=q.AclApi,V=q.Permissions,$=q.Agents,Q=V.READ,X=V.WRITE,Y=V.APPEND,z=new A.a(x.a);function Z(e){return K.apply(this,arguments)}function K(){return(K=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,z.itemExists(t);case 3:if(e.sent){e.next=6;break}return e.next=6,z.createFolder(t);case 6:e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function ee(e){return e.split("/profile")[0]+"/viade/groups/"}function te(e){return e.split("/profile")[0]+"/viade/routes/"}function ae(e){return e.split("/profile")[0]+"/viade/"}function ne(e){return e.split("/profile")[0]+"/viade/comments/"}function re(e){return e.split("profile")[0]+"viade/inbox/"}function ie(e,t){return ne(e)+t}function oe(e){return e.split("/profile")[0]+"/viade/resources/"}function se(e){return e.split("/profile")[0]+"/viade/shared/"}function ce(e){return ue.apply(this,arguments)}function ue(){return(ue=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=JSON,e.next=4,z.readFile(t);case 4:return e.t1=e.sent,e.abrupt("return",e.t0.parse.call(e.t0,e.t1));case 8:return e.prev=8,e.t2=e.catch(0),e.abrupt("return",null);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function le(e){return de.apply(this,arguments)}function de(){return(de=Object(v.a)(g.a.mark((function e(t){var a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,z.readFile(t);case 3:return e.t1=e.sent,a=e.t0.parse.call(e.t0,e.t1),e.abrupt("return",a.comments);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(v.a)(g.a.mark((function e(t){var a,n,r,i,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=t.map((function(e){return e["@id"]})),n=[],r=Object(T.a)(a);try{for(r.s();!(i=r.n()).done;)o=i.value,n.push(o)}catch(s){r.e(s)}finally{r.f()}return e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e,t){return he.apply(this,arguments)}function he(){return(he=Object(v.a)(g.a.mark((function e(t,a){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.t0=a.split(".")[0],e.t1=t.name,e.t2=t.description,e.t3=t.author,e.next=7,le(t.comments);case 7:return e.t4=e.sent,e.t5=t.points.map((function(e){return[e.latitude,e.longitude]})),e.next=11,me(t.media);case 11:return e.t6=e.sent,e.t7=[],e.abrupt("return",{id:e.t0,name:e.t1,description:e.t2,author:e.t3,comments:e.t4,positions:e.t5,media:e.t6,sharedWith:e.t7});case 16:e.prev=16,e.t8=e.catch(0);case 18:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}function Ee(e){return e.notification.object.uri}function be(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(v.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t+".acl",e.next=3,z.itemExists(a);case 3:if(e.sent){e.next=7;break}return n=W(t),e.next=7,z.createFile(a,n,"text/turtle");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ve(e){return 0!==e.length}function ye(e,t){return xe.apply(this,arguments)}function xe(){return(xe=Object(v.a)(g.a.mark((function e(t,a){var n,r,i;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new J(x.a.fetch,{autoSave:!0}),r={},e.prev=2,e.next=5,n.loadFromFileUrl(t);case 5:r=e.sent,i=r.getPermissionsFor($.PUBLIC),ve(Array.from(i.permissions).map((function(e){return e})))||r.addRule(a,$.PUBLIC),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(2);case 13:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}function Oe(e){return _e.apply(this,arguments)}function _e(){return(_e=Object(v.a)(g.a.mark((function e(t){var a,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=[ae(t),te(t),ne(t),re(t),oe(t),se(t),ee(t)],n=0;case 3:if(!(n<a.length)){e.next=11;break}return e.next=6,Z(a[n]);case 6:return e.next=8,be(a[parseInt(n)]);case 8:n++,e.next=3;break;case 11:return e.next=13,ye(re(t),[Q,Y]);case 13:return e.next=15,ye(ne(t),[Q,Y]);case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(e,t){return Re.apply(this,arguments)}function Re(){return(Re=Object(v.a)(g.a.mark((function e(t,a){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=te(a),e.next=3,z.readFolder(n);case 3:if(!e.sent.files.some((function(e){return e.name===t}))){e.next=15;break}return e.prev=5,e.next=8,ce(n+t);case 8:return r=e.sent,e.abrupt("return",fe(r,t));case 12:return e.prev=12,e.t0=e.catch(5),e.abrupt("return",null);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[5,12]])})))).apply(this,arguments)}function je(){return(je=Object(v.a)(g.a.mark((function e(t){var a,n,r,i,o,s,c,u,l,d,m,p;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=te(t),n=[],e.next=4,Z(a);case 4:return e.next=6,z.readFolder(a);case 6:r=e.sent,i=r.files.filter((function(e){return/\.jsonld$/.test(e.name)})),o=0;case 10:if(!(o<i.length)){e.next=18;break}return e.next=13,ke(i[o].name,t);case 13:null!==(s=e.sent)&&n.push(s);case 15:o++,e.next=10;break;case 18:return c=se(t),e.next=21,Z(c);case 21:return e.next=23,z.readFolder(c);case 23:u=e.sent.files,l=0;case 25:if(!(l<u.length)){e.next=44;break}if(u[parseInt(l)].url.includes(".acl")){e.next=41;break}return e.next=29,ce(u[parseInt(l)].url);case 29:if(null===(d=e.sent)){e.next=41;break}return m=d.routes,e.prev=32,m=m.map((function(e){return e["@id"]})),p=m.map(function(){var e=Object(v.a)(g.a.mark((function e(t){var a,n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=JSON,e.next=3,z.readFile(t);case 3:return e.t1=e.sent,a=e.t0.parse.call(e.t0,e.t1),n=(n=t.split("/"))[n.length-1],e.next=9,fe(a,n);case 9:return r=e.sent,e.abrupt("return",r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=37,Promise.all(p).then((function(e){return e.map((function(e){return n.push(e)}))}));case 37:e.next=41;break;case 39:e.prev=39,e.t0=e.catch(32);case 41:l++,e.next=25;break;case 44:return e.abrupt("return",n);case 45:case"end":return e.stop()}}),e,null,[[32,39]])})))).apply(this,arguments)}function we(e,t,a,n,r){return Se.apply(this,arguments)}function Se(){return(Se=Object(v.a)(g.a.mark((function e(t,a,n,r,i){var o,s,c,u,l,d,m,p,f,h;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=new J(x.a.fetch,{autoSave:!0}),e.prev=1,console.log("antes de leer acl ruta",{userWebId:t,routeUri:a,targetUserWebId:n}),e.next=5,o.loadFromFileUrl(a);case 5:return s=e.sent,console.log("acl ruta le\xeddo",{acl:s}),e.next=9,s.addRule(Q,n);case 9:console.log("regla a\xf1adida al acl ruta",{acl:s}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),console.log(e.t0);case 15:return c=(c=a.split("/"))[c.length-1],e.prev=17,console.log("anter de acl comment",{userWebId:t,commentsFile:c,routeCommentsFile:ie(t,c)}),e.next=21,o.loadFromFileUrl(ie(t,c));case 21:return s=e.sent,console.log("despu\xe9s de leer acl comment",{acl:s}),e.next=25,s.addRule([Q,Y,X],n);case 25:console.log("regla a\xf1adida comment",{acl:s}),e.next=31;break;case 28:e.prev=28,e.t1=e.catch(17),console.log(e.t1);case 31:return e.next=33,ce(a);case 33:u=e.sent,e.prev=34,l=Object(T.a)(u.media),e.prev=36,l.s();case 38:if((d=l.n()).done){e.next=51;break}return m=d.value,p=m["@id"],console.log("anter de acl media",{mediaUri:p}),e.next=44,o.loadFromFileUrl(p);case 44:return s=e.sent,console.log("despu\xe9s de acl media",{acl:s}),e.next=48,s.addRule([Q],n);case 48:console.log("despues a\xf1adr permisos ",{acl:s});case 49:e.next=38;break;case 51:e.next=56;break;case 53:e.prev=53,e.t2=e.catch(36),l.e(e.t2);case 56:return e.prev=56,l.f(),e.finish(56);case 59:e.next=64;break;case 61:e.prev=61,e.t3=e.catch(34),console.log(e.t3);case 64:return f=re(n),h=f+Object(I.a)()+".jsonld",e.next=68,z.postFile(h,JSON.stringify(U(a,r,i)),"application/ld+json");case 68:case"end":return e.stop()}}),e,null,[[1,12],[17,28],[34,61],[36,53,56,59]])})))).apply(this,arguments)}function Ce(e,t){return Le.apply(this,arguments)}function Le(){return(Le=Object(v.a)(g.a.mark((function e(t,a){var n,r,i,o,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=se(t),i=a.split("//")[1].split("/")[0].split(":")[0]+".jsonld",o=n+i,e.next=5,z.itemExists(o);case 5:if(e.sent){e.next=9;break}r={"@context":{"@version":1.1,routes:{"@container":"@list","@id":"viade:routes"},viade:"http://arquisoft.github.io/viadeSpec/"},routes:[]},e.next=13;break;case 9:return e.next=11,z.readFile(o);case 11:s=e.sent,r=JSON.parse(s);case 13:if(0!==r.routes.filter((function(e){return e["@id"]===a})).length){e.next=18;break}return r.routes.push({"@id":a}),e.next=18,z.createFile(o,JSON.stringify(r),"application/ld+json");case 18:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(){return(Te=Object(v.a)(g.a.mark((function e(t){var a,n,r,i,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=re(t),e.next=3,z.readFolder(a);case 3:n=e.sent,r=0;case 6:if(!(r<n.files.length)){e.next=24;break}if(n.files[parseInt(r)].url.includes(".acl")){e.next=21;break}return e.next=10,z.readFile(n.files[parseInt(r)].url);case 10:return i=e.sent,e.prev=11,o=Ee(JSON.parse(i)),e.next=15,Ce(t,o);case 15:return e.next=17,z.deleteFile(n.files[r].url);case 17:e.next=21;break;case 19:e.prev=19,e.t0=e.catch(11);case 21:r++,e.next=6;break;case 24:case"end":return e.stop()}}),e,null,[[11,19]])})))).apply(this,arguments)}function Ne(e,t,a){return Ae.apply(this,arguments)}function Ae(){return(Ae=Object(v.a)(g.a.mark((function e(t,a,n){var r,i,o,s,c,u,l,d,m;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new Date,i=r.getDate(),o=r.getMonth()+1,s=r.getFullYear(),c=t.split("//")[1].split("/")[0].split(":")[0],u=P(c,n,s,o,i),e.next=8,z.readFile(a);case 8:return l=e.sent,d=JSON.parse(l),(m=d.comments).push(u),d.comments=m,e.next=15,z.putFile(a,JSON.stringify(d),"application/ld+json");case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(e,t){return De.apply(this,arguments)}function De(){return(De=Object(v.a)(g.a.mark((function e(t,a){var n,r,i,o,s,c,u,l,d,m,p,f,h;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.name.replace(/ /g,"_"),r=n+Object(I.a)()+".jsonld",i=oe(a),o=[],s=t.images.concat(t.videos),c=0;case 6:if(!(c<s.length)){e.next=14;break}return u=i+s[c].name,e.next=10,z.createFile(u,s[parseInt(c)],s[parseInt(c)].type);case 10:o.push({uri:u,name:s[parseInt(c)].name});case 11:c++,e.next=6;break;case 14:for(l=G(t,a,r),d=0;d<o.length;d++)l.media.push(o[parseInt(d)]);return m=te(a),p=m+r,l.media,f=o.map((function(e){return{"@id":e.uri,name:e.name}})),l.media=f,e.next=23,z.createFile(p,JSON.stringify(l),"application/ld+json");case 23:return e.next=25,Z(ne(a));case 25:return h=ie(a,r),e.next=28,z.createFile(h,JSON.stringify(M(p)),"application/ld+json");case 28:if(""===t.comments){e.next=31;break}return e.next=31,Ne(a,h,t.comments);case 31:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e,t){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(v.a)(g.a.mark((function e(t,a){var n,r,i,o,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=te(a),e.next=3,z.readFolder(n);case 3:if(r=e.sent,i=t+".jsonld",!r.files.some((function(e){return e.name===i}))){e.next=17;break}return e.next=8,ce(n+i);case 8:return o=e.sent,e.next=11,me(o.media);case 11:return s=e.sent,e.next=14,z.delete(ie(a,i));case 14:return s.forEach(function(){var e=Object(v.a)(g.a.mark((function e(t){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.delete(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=17,z.delete(n+i);case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Me(){return(Me=Object(v.a)(g.a.mark((function e(t){var a,n,r,i,o,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=re(t),e.next=3,z.itemExists(a);case 3:if(e.sent){e.next=5;break}return e.abrupt("return",[]);case 5:return n=[],e.next=8,z.readFolder(a);case 8:r=e.sent,i=r.files,o=0;case 12:if(!(o<i.length)){e.next=25;break}return e.prev=13,e.next=16,B(z,i[parseInt(o)]);case 16:s=e.sent,n.push(s),e.next=22;break;case 20:e.prev=20,e.t0=e.catch(13);case 22:o++,e.next=12;break;case 25:return e.abrupt("return",n);case 26:case"end":return e.stop()}}),e,null,[[13,20]])})))).apply(this,arguments)}function Pe(e,t,a){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(v.a)(g.a.mark((function e(t,a,n){var r,i,o,s;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=se(n),e.next=3,z.readFolder(r);case 3:return i=(i=(i=e.sent).files).filter((function(e){return t.includes(e.name.split(".jsonld")[0])})),e.t0=JSON,e.next=9,z.readFile(i[0].url);case 9:return e.t1=e.sent,o=e.t0.parse.call(e.t0,e.t1),s=o.routes.filter((function(e){return!e["@id"].includes(a)})),o.routes=s,e.next=15,z.createFile(i[0].url,JSON.stringify(o),"application/ld+json");case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(){return(We=Object(v.a)(g.a.mark((function e(t){var a,n,r,i,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.readFolder(ee(t));case 2:a=e.sent,n=a.files.filter((function(e){return/\.jsonld$/.test(e.name)})),r=0,i=[];case 7:if(!(r<n.length)){e.next=15;break}return e.next=10,Be(n[r].name,t);case 10:null!==(o=e.sent)&&i.push(o);case 12:r++,e.next=7;break;case 15:return e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Be(e,t){return He.apply(this,arguments)}function He(){return(He=Object(v.a)(g.a.mark((function e(t,a){var n,r;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee(a),e.next=3,z.readFolder(n);case 3:if(!e.sent.files.some((function(e){return e.name===t}))){e.next=15;break}return e.prev=5,e.next=8,ce(n+t);case 8:return r=e.sent,e.abrupt("return",F(r));case 12:return e.prev=12,e.t0=e.catch(5),e.abrupt("return",null);case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}}),e,null,[[5,12]])})))).apply(this,arguments)}function qe(){return(qe=Object(v.a)(g.a.mark((function e(t,a,n){var r,i,o;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=D(a,n),i=ee(t),a=a.replace(/ /g,"_"),o=i+a+Object(I.a)()+".jsonld",e.next=6,z.createFile(o,JSON.stringify(r),"application/ld+json");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Je=Object(E.b)((function(e){return{loaded:e.control.loaded}}),(function(e){return{loadFriendsRequest:function(){return e({type:"LOAD_FRIENDS_REQUEST",payload:!0})},updateWebId:function(t){return e(function(e){return{type:"UPDATE_WEB_ID",payload:e}}(t))},loadEmailRequest:function(){return e({type:"LOAD_EMAIL_REQUEST",payload:!0})},loadRoutesRequest:function(){return e({type:"LOAD_ROUTES_REQUEST",payload:!0})},contentLoaded:function(){return e({type:"LOAD",payload:!0})},clearRoute:function(){return e({type:"CLEAR_ROUTE",payload:null})}}}))((function(e){var t=[{id:0,text:"Dashboard",href:"/dashboard",icon:r.a.createElement(d.g,{className:"icon"}),testId:"navbar-dashboard"},{id:1,text:"MyRoutes",href:"/routes/MyRoutes",icon:r.a.createElement(d.h,{className:"icon"}),testId:"navbar-my-routes"},{id:2,text:"UploadRoute",href:"/routes/upload",icon:r.a.createElement(d.a,{className:"icon"}),testId:"navbar-upload-route"},{id:3,text:"Notifications",href:"/notifications",icon:r.a.createElement(d.d,{className:"icon"}),testId:"navbar-notifications"}];e.loaded||O().then((function(t){e.updateWebId(t),e.loadFriendsRequest(),e.loadEmailRequest(),null===t?Oe("http://testing.inrupt.net/profile/card#me").then((function(e){})):Oe(t).then((function(e){})),e.loadRoutesRequest(),e.contentLoaded()}));var a=[{id:0,text:r.a.createElement(k.a,{id:"MyProfile"}),href:"/profile",testId:"navbar-my-profile"},{id:1,text:r.a.createElement(k.a,{id:"Settings"}),href:"/settings",testId:"navbar-settings"},{id:2,text:r.a.createElement(k.a,{id:"MyGroups"}),href:"/profile/groups",testId:"navbar-groups"},{id:3,text:r.a.createElement(k.a,{id:"LogOut"}),href:"#/",testId:"navbar-logout"}];return r.a.createElement(c.a,{className:"bg-light",fixed:"top",bg:"light",expand:"lg"},r.a.createElement(p.LinkContainer,{to:"/dashboard"},r.a.createElement(c.a.Brand,{"data-testid":"navbar-brand",href:"/dashboard"},r.a.createElement("img",{alt:"Viade logo",src:"/viade_en1b/viade-logo.svg"}),r.a.createElement("span",null,e.brandName))),r.a.createElement(c.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(c.a.Collapse,{className:"justify-content-end",id:"basic-navbar-nav"},r.a.createElement(u.a,{className:"justify-content-end",activeKey:"/home"},r.a.createElement(L,null),t.map((function(t){return r.a.createElement("span",{key:t.id},r.a.createElement(p.LinkContainer,{to:t.href},r.a.createElement(u.a.Link,{"data-testid":t.testId,to:t.href,key:t.id,href:t.href,className:"nav-link",onClick:e.clearRoute},t.icon,r.a.createElement(k.a,{id:t.text}))))})),r.a.createElement(l.a,{variant:"secondary",drop:"left",title:r.a.createElement(d.i,{className:"icon"})},a.map((function(t){return r.a.createElement(l.a.Item,{"data-testid":t.testId,key:t.id,href:t.href,onClick:e.clearRoute},3===t.id?r.a.createElement(m.a,null,t.text):r.a.createElement(p.LinkContainer,{to:t.href},r.a.createElement(u.a.Link,null,t.text)))}))))))})),Ve=a(254),$e=a(110),Qe=a(134),Xe=a(1120),Ye=a(1121),ze=a(1111);a(590);var Ze=function(e){return r.a.createElement("div",{id:"login-container"},r.a.createElement(Xe.a,null,r.a.createElement("div",{id:"login-card"},r.a.createElement("img",{alt:"Viade logo",src:"/viade_en1b/viade-logo.svg"}),r.a.createElement("h1",null,r.a.createElement(k.a,{id:"LoginTitle"})),r.a.createElement("p",null,r.a.createElement(k.a,{id:"LoginParagraph"}))),r.a.createElement("div",{id:"clipped"}),r.a.createElement("div",{id:"login-another-div"},r.a.createElement("h3",{"data-testid":"login-header"},r.a.createElement(k.a,{id:"LoginButtonTitle"})),r.a.createElement(Ye.a,{popup:"https://solid.github.io/solid-auth-client/dist/popup.html",login:r.a.createElement(k.a,{id:"LoginButton"}),logout:r.a.createElement(k.a,{id:"LogoutButton"})}))),r.a.createElement(ze.a,null,r.a.createElement(Qe.c,{to:"/dashboard"})))},Ke=a(1122),et=a(1112),tt=a(175),at=(a(591),a(1123)),nt=a(1116),rt=a(555),it=a.n(rt),ot=function(e){var t=e.friends.map((function(t,a){return r.a.createElement(at.a,{"data-testid":"card"+a,onClick:function(){return e.onClick(a)},className:e.style?e.style.card:"",key:a},r.a.createElement(at.a.Body,{style:{marginLeft:"1em"}},r.a.createElement(nt.a.Check,{onChange:function(){},checked:!!t.checked,type:"checkbox",label:t.checked?r.a.createElement(r.a.Fragment,null,t.name,r.a.createElement(d.f,{"data-testid":"friend-list-check"+a,style:{color:"yellowgreen",transform:"scale(2)",display:"inline-block",marginLeft:"1em",transition:"all 200ms ease-in-out"},color:"green"})):t.name})))})),a=e.friends.map((function(e,t){return r.a.createElement(at.a,{key:t,onClick:function(e){return function(e){return r.a.createElement(Qe.c,{to:e.uri})}(e)},"data-testid":"friend-list-card"+t},r.a.createElement(at.a.Body,null,r.a.createElement(at.a.Link,{"data-testid":"friend-list-friend-uri"+t,href:e.uri},r.a.createElement("p",{"data-testid":"friend-list-friend-name"+t},e.name))))})),n=r.a.createElement("div",{"data-testid":"friend-list-main",className:"FriendList"},e.checked?t:r.a.createElement(r.a.Fragment,null,a));return r.a.createElement("div",{className:e.style?e.style.container:it.a.friendListContainer,"data-testid":"friend-list-container",id:"friendListContainer"},r.a.createElement("h1",{"data-testid":"friend-list-heading"},r.a.createElement(k.a,{id:"FriendsList"})),n)},st=a(1113),ct=a(552),ut=a(13),lt=function(e){return e.map((function(e){return Object(ut.a)({},e)}))},dt=function(e,t){var a=[],n={};return 0===t.length?e:(t.map((function(e){return n[e]=!0})),e.map((function(e){return function(e,t){return e[t]}(n,e.uri)?[]:a.push(Object(ut.a)({},e))})),a)},mt=function(e,t){return e.filter((function(e){return e.author===t.split("//")[1].split("/")[0]})).length};var pt=Object(E.b)((function(e){return{userEmail:e.user.email,emailLoading:e.user.emailLoading,emailError:e.user.emailError,friends:e.user.friends,routes:e.route.routes,userWebId:e.auth.userWebId}}))(r.a.memo((function(e){var t=e.userEmail?r.a.createElement("p",null,e.userEmail):null,a=!0===e.loading?r.a.createElement("p",null,"Loading..."):null,n=e.routes,i=e.userWebId,o=mt(n,i),s=function(e,t){return e.length-mt(e,t)}(n,i);return r.a.createElement("div",{id:"generalComponent"},r.a.createElement(ze.a,null,r.a.createElement("div",{id:"card"},r.a.createElement("div",{id:"image-cropper"},r.a.createElement(Ke.a,{src:"user.vcard_hasPhoto",defaultSrc:"profile.svg",id:"profilePicture"})),r.a.createElement("div",{id:"allData"},r.a.createElement("div",{id:"profileData"},r.a.createElement("h1",null,r.a.createElement(k.a,{id:"Greetings"}),","," ",r.a.createElement("b",null,r.a.createElement(et.a,{src:"user.name"}))),t,a,r.a.createElement("p",null,r.a.createElement(st.a,{variant:"dark"},r.a.createElement(et.a,{src:"user.vcard_role"})?r.a.createElement(et.a,{src:"user.vcard_role"}):r.a.createElement(k.a,{id:"CEO"}))),r.a.createElement("a",{href:Object(tt.a)()},r.a.createElement(k.a,{id:"SolidProfile"})," ",r.a.createElement(d.e,null))),r.a.createElement("div",{id:"profileData"},r.a.createElement(ct.a,{variant:"primary"},r.a.createElement(k.a,{id:"Routes"}),r.a.createElement(st.a,{variant:"light"},o)),r.a.createElement(ct.a,{variant:"primary"},r.a.createElement(k.a,{id:"SharedRoutes"})," ",r.a.createElement(st.a,{variant:"light"},s)))),r.a.createElement(ot,{friends:e.friends,id:"friendList"}))),r.a.createElement(Xe.a,null,r.a.createElement(Qe.c,{to:"/"})))}))),ft=a(510),ht=a(307),Et=a(512),bt=a(511),gt=(a(972),a(559)),vt=a.n(gt),yt=(a(974),function(e){var t=e.positions;return function(e,t,a){return r.a.createElement("div",{"data-testid":"mymap-container",className:a||"leaflet-container"},r.a.createElement(ft.a,{"data-testid":"mymap-map",zoomControl:!1,center:e,zoom:14},r.a.createElement(ht.b,{position:"topleft"},r.a.createElement(ht.b.BaseLayer,{checked:"false",name:"OpenStreetMap.BlackAndWhite"},r.a.createElement(Et.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://tiles.wmflabs.org/bw-mapnik/{z}/{x}/{y}.png"})),r.a.createElement(ht.b.BaseLayer,{checked:"true",name:"OpenStreetMap.Mapnik"},r.a.createElement(Et.a,{"data-testid":"mymap-tilelayer",attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"})),r.a.createElement(vt.a,{position:"topright"})),r.a.createElement(bt.a,{"data-testid":"mymap-polyline",color:"var(--color-primary)",positions:t})))}(e.center,t,e.style)}),xt=a(150),Ot=a.n(xt),_t=(a(975),function(e){var t=e.route,a=e.onClickHandle;return r.a.createElement(at.a,{"data-testid":"route-summary-card",id:e.id,onClick:function(){return a(t)}},r.a.createElement("div",{id:"blurryBackground"}),r.a.createElement(at.a.Body,null,r.a.createElement(at.a.Title,{"data-testid":"route-summary-title"},t.name),r.a.createElement(at.a.Subtitle,{"data-testid":"route-summary-subtitle"},t.author)))}),kt=a(322),Rt=a.n(kt),jt=a(560),wt=a.n(jt),St=Object(E.b)((function(e){return{loading:e.route.routesLoading}}))((function(e){var t=Object(n.useContext)(j),a=e.routes,i=e.onClick,o=e.currentMap,s=a.map((function(e){return o?r.a.createElement(_t,{"data-testid":"route-list-map",key:e.id,id:e.id===o.id?"active":"",onClickHandle:i,route:e}):r.a.createElement(_t,{"data-testid":"route-list-handler",key:e.id,onClickHandle:i,route:e})}));return r.a.createElement("div",{"data-testid":"route-list-div",className:e.style?e.style:Rt.a.routeList},e.loading?r.a.createElement(wt.a,{color:t["--color-primary"],type:"Bars"}):s.length>0?s:r.a.createElement("span",{className:Rt.a.noRoutes},r.a.createElement(k.a,{id:"NoRoutes"})))}));var Ct=Object(E.b)((function(e){return{routes:e.route.routes,selectedRoute:e.route.selectedRoute}}),(function(e){return{showRoute:function(t){return e(h(t))}}}))((function(e){var t=e.routes,a=e.selectedRoute,n=e.showRoute,i=null==a?r.a.createElement("div",{"data-testid":"dashboard-header",className:Ot.a.titleHolder},r.a.createElement("h1",null,r.a.createElement(k.a,{id:"RoutesList"}))):r.a.createElement("div",{"data-testid":"dashboard-header",className:Ot.a.titleHolder},r.a.createElement("h1",null,a.name)," ",r.a.createElement("p",null," ",r.a.createElement(k.a,{id:"By"})," ",a.author)),o=null==a?{}:a.positions,s=null==a?[43.360976539,-5.831938919]:a.positions[a.positions.length-1];return r.a.createElement("div",{"data-testid":"dashboard-container",className:Ot.a.dashboard},r.a.createElement(ze.a,null,r.a.createElement(St,{currentMap:a,routes:t,onClick:n,style:Ot.a.routeList}),r.a.createElement("div",{className:Ot.a.mapContainer},i,r.a.createElement(yt,{style:Ot.a.myMap,center:s,positions:o}))),r.a.createElement(Xe.a,null,r.a.createElement(Qe.c,{to:"/"})))})),Lt=a(19),Tt=a(12),Nt=a(15),At=a(45),It=a(46),Dt=a(205),Ft=a.n(Dt),Ut=function(e){var t=Object(n.useState)({filename:"",numberOfFiles:0}),a=Object(s.a)(t,2),i=a[0],o=a[1];Object(n.useEffect)((function(){e.reset&&c()}),[e.reset]);var c=function(){o({filename:"",numberOfFiles:0})},u=Object(n.useRef)(),l=function(t){e.onChange(t);var a=u.current.files.length;o(Object(ut.a)(Object(ut.a)({},i),{},{numberOfFiles:a}))};return e.file?r.a.createElement(nt.a.Group,{className:e.className},r.a.createElement(nt.a.Control,{ref:u,onChange:function(t){if(e.onChange(t),void 0!==u.current.files[0]&&function(e){var t=e.split(".");switch(t[t.length-1].toLowerCase()){case"gpx":return!0;default:return!1}}(u.current.files[0].name)){var a=u.current.files[0].name;o(Object(ut.a)(Object(ut.a)({},i),{},{filename:a}))}else{o(Object(ut.a)(Object(ut.a)({},i),{},{filename:""}))}},id:e.id,type:"file",accept:".gpx"}),r.a.createElement(nt.a.Label,{className:"uploadLabel",htmlFor:e.id},r.a.createElement("p",{"data-testid":"upload-button-label"},""!==i.filename?i.filename:e.text),r.a.createElement(d.j,null))):e.videos?r.a.createElement(nt.a.Group,{className:e.className},r.a.createElement(nt.a.Control,{multiple:!0,ref:u,onChange:l,id:e.id,type:"file",accept:"video/*"}),r.a.createElement(nt.a.Label,{className:"uploadLabel",htmlFor:e.id},r.a.createElement("p",null,0!==i.numberOfFiles?i.numberOfFiles+" files selected":e.text),r.a.createElement(d.j,null))):r.a.createElement(nt.a.Group,{className:e.className},r.a.createElement(nt.a.Control,{multiple:!0,ref:u,onChange:l,id:e.id,type:"file",accept:"image/*"}),r.a.createElement(nt.a.Label,{className:"uploadLabel",htmlFor:e.id},r.a.createElement("p",null,0!==i.numberOfFiles?i.numberOfFiles+" files selected":e.text),r.a.createElement(d.j,null)))},Mt=a(1115),Pt=function(e){var t=Object(n.useState)(!1),a=Object(s.a)(t,2),i=a[0],o=a[1],c=function(){e.handleClose(),o(!1)},u=e.saveText?r.a.createElement(ct.a,{"data-testid":"modalSaveButton",disabled:e.saveDisabled,variant:"primary",onClick:function(){e.onSave(),o(!1)}},e.saveText):null,l=e.closeText?r.a.createElement(ct.a,{"data-testid":"modalCancelButton",variant:"secondary",onClick:c},e.closeText):null;return r.a.createElement("div",null,r.a.createElement(ct.a,{"data-testid":"modalButton",disabled:e.disabled,variant:"primary",onClick:function(t){e.onOpen(),o(!0)}},e.toggleText),r.a.createElement(Mt.a,{show:i,onHide:c},r.a.createElement(Mt.a.Header,{closeButton:!0},r.a.createElement(Mt.a.Title,{"data-testid":"modalTitle"},e.title)),r.a.createElement(Mt.a.Body,null,e.children),r.a.createElement(Mt.a.Footer,null,u,l)))},Gt=a(329),Wt=function e(t){Object(Tt.a)(this,e),this.author=t.author,this.year=t.year,this.license=t.license},Bt=function e(t){Object(Tt.a)(this,e),this.$={},this.$.href=t.$.href||t.href,this.text=t.text,this.type=t.type},Ht=function e(t){Object(Tt.a)(this,e),this.name=t.name,this.email=t.emil,this.link=new Bt(t.link)},qt=function e(t){Object(Tt.a)(this,e),this.minlat=t.minlat,this.minlon=t.minlon,this.maxlat=t.maxlat,this.maxlon=t.maxlon},Jt=function e(t){Object(Tt.a)(this,e),this.name=t.name,this.desc=t.desc,this.time=t.time?new Date(t.time):new Date,this.keywords=t.keywords,this.extensions=t.extensions,t.author&&(this.author=new Ht(t.author)),t.link&&(Array.isArray(t.link)||(t.link=[t.link]),this.link=t.link.map((function(e){return new Bt(e)}))),t.bounds&&(this.bounds=new qt(t.bounds)),t.copyright&&(this.copyright=new Wt(t.copyright))},Vt=function e(t){Object(Tt.a)(this,e),this.$={},this.$.lat=0===t.$.lat||0===t.lat?0:t.$.lat||t.lat||-1,this.$.lon=0===t.$.lon||0===t.lon?0:t.$.lon||t.lon||-1,this.ele=t.ele,this.time=t.time?new Date(t.time):new Date,this.magvar=t.magvar,this.geoidheight=t.geoidheight,this.name=t.name,this.cmt=t.cmt,this.desc=t.desc,this.src=t.src,this.sym=t.sym,this.type=t.type,this.sat=t.sat,this.hdop=t.hdop,this.vdop=t.vdop,this.pdop=t.pdop,this.ageofdgpsdata=t.ageofdgpsdata,this.dgpsid=t.dgpsid,this.extensions=t.extensions,t.link&&(Array.isArray(t.link)||(t.link=[t.link]),this.link=t.link.map((function(e){return new Bt(e)})))},$t=function e(t){Object(Tt.a)(this,e),this.name=t.name,this.cmt=t.cmt,this.desc=t.desc,this.src=t.src,this.number=t.number,this.type=t.type,this.extensions=t.extensions,t.link&&(Array.isArray(t.link)||(this.link=[t.link]),this.link=t.link.map((function(e){return new Bt(e)}))),t.rtept&&(Array.isArray(t.rtept)||(this.rtept=[t.rtept]),this.rtept=t.rtept.map((function(e){return new Vt(e)})))},Qt=function e(t){Object(Tt.a)(this,e),t.trkpt&&(Array.isArray(t.trkpt)||(t.trkpt=[t.trkpt]),this.trkpt=t.trkpt.map((function(e){return new Vt(e)}))),this.extensions=t.extensions},Xt=function e(t){Object(Tt.a)(this,e),this.name=t.name,this.cmt=t.cmt,this.desc=t.desc,this.src=t.src,this.number=t.number,this.type=t.type,this.extensions=t.extensions,t.link&&(Array.isArray(t.link)||(t.link=[t.link]),this.link=t.link.map((function(e){return new Bt(e)}))),t.trkseg&&(Array.isArray(t.trkseg)||(t.trkseg=[t.trkseg]),this.trkseg=t.trkseg.map((function(e){return new Qt(e)})))};var Yt={version:"1.1",creator:"gpx-parser-builder",xmlns:"http://www.topografix.com/GPX/1/1","xmlns:xsi":"http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation":"http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"},zt=function(){function e(t){Object(Tt.a)(this,e),this.$=Object.assign({},Yt,t.$||t.attributes||{}),this.extensions=t.extensions,t.metadata&&(this.metadata=new Jt(t.metadata)),t.wpt&&(Array.isArray(t.wpt)||(t.wpt=[t.wpt]),this.wpt=t.wpt.map((function(e){return new Vt(e)}))),t.rte&&(Array.isArray(t.rte)||(t.rte=[t.rte]),this.rte=t.rte.map((function(e){return new $t(e)}))),t.trk&&(Array.isArray(t.trk)||(t.trk=[t.trk]),this.trk=t.trk.map((function(e){return new Xt(e)}))),function e(t){Object.entries(t).forEach((function(a){var n=Object(s.a)(a,2),r=n[0],i=n[1];i&&i instanceof Object?e(i):null===i&&delete t[r]}))}(this)}return Object(Nt.a)(e,[{key:"toString",value:function(t){(t=t||{}).rootName="gpx";var a=new Gt.a(t),n=new e(this);return function e(t){Object.entries(t).forEach((function(a){var n=Object(s.a)(a,2),r=n[0],i=n[1];i&&(i instanceof Date?t[r]=i.toISOString().split(".")[0]+"Z":i instanceof Object&&e(i))}))}(n),a.buildObject(n)}}],[{key:"parse",value:function(t){var a;return Gt.b(t,{explicitArray:!1},(function(t,n){t||n.gpx&&(a=new e({attributes:n.gpx.$,metadata:n.gpx.metadata,wpt:n.gpx.wpt,rte:n.gpx.rte,trk:n.gpx.trk}))})),a}}]),e}(),Zt=function(e){var t=zt.parse(e),a=[];return t.trk.forEach((function(e){var t=[];e.trkseg.forEach((function(e){var a=[];e.trkpt.forEach((function(e){a.push([e.$.lat,e.$.lon])})),a.forEach((function(e){return t.push(e)}))})),a.push(t)})),a[0]},Kt=function(e){Object(At.a)(a,e);var t=Object(It.a)(a);function a(){var e;Object(Tt.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={name:"",description:"",file:"",author:"",reset:!1,positions:[],comments:"",images:[],videos:[]},e.checkFileIsGPX=function(e){var t=e.split(".");switch(t[t.length-1].toLowerCase()){case"gpx":return!0;default:return!1}},e.isEmpty=function(){return!(""!==e.state.name&&""!==e.state.file&&e.checkFileIsGPX(e.state.file))},e}return Object(Nt.a)(a,[{key:"changeHandlerRoute",value:function(e){this.setState(Object(Lt.a)({},e.target.id,e.target.value))}},{key:"changeHandlerFiles",value:function(e){var t=e.target.files[0],a=null,n=this;if(t&&this.checkFileIsGPX(t.name)){var r=new FileReader;r.readAsText(t,"UTF-8"),r.onload=function(e){a=Zt(e.target.result),n.state.positions=a},r.onerror=function(e){}}else alert("Incorrect file type, please input a .gpx file"),n.state.file="";this.setState(Object(Lt.a)({},e.target.id,e.target.value))}},{key:"changeHandlerImages",value:function(e){var t=[];Array.from(e.target.files).forEach((function(e){t.push(e)})),this.setState(Object(ut.a)(Object(ut.a)({},this.state),{},{images:t}))}},{key:"changeHandlerVideos",value:function(e){var t=[];Array.from(e.target.files).forEach((function(e){return t.push(e)})),this.setState(Object(ut.a)(Object(ut.a)({},this.state),{},{videos:t}))}},{key:"resetState",value:function(){return{name:"",description:"",file:"",author:"",positions:[],reset:!1,comments:"",images:[],videos:[]}}},{key:"componentDidUpdate",value:function(){this.state.reset&&this.setState(this.resetState())}},{key:"submitForm",value:function(){this.props.uploadRoute.bind(this),this.props.uploadRoute(this.state,this.props.routes,this.props.userWebId),this.props.loadRoutes.bind(this),this.setState(Object(ut.a)(Object(ut.a)({},this.state),{},{reset:!0}))}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:Ft.a.uploadContainer},r.a.createElement(nt.a,{className:Ft.a.form},r.a.createElement("div",{id:"form-info"},r.a.createElement(nt.a.Group,{htmlFor:"routeName"},r.a.createElement(nt.a.Label,{htmlFor:"name"},r.a.createElement(k.a,{id:"NameOfTheRoute"})),r.a.createElement(k.a,{id:"RouteNamePlaceholder"},(function(t){return r.a.createElement(nt.a.Control,{id:"name",onChange:e.changeHandlerRoute.bind(e),placeholder:t,value:e.state.name,type:"text"})}))),r.a.createElement(nt.a.Group,{htmlFor:"routeDescription"},r.a.createElement(nt.a.Label,{htmlFor:"description"},r.a.createElement(k.a,{id:"Description"})),r.a.createElement(k.a,{id:"DescriptionPlaceholder"},(function(t){return r.a.createElement(nt.a.Control,{id:"description",onChange:e.changeHandlerRoute.bind(e),value:e.state.description,as:"textarea",rows:"4",placeholder:t})}))),r.a.createElement(nt.a.Group,{htmlFor:"routeDescription"},r.a.createElement(nt.a.Label,{htmlFor:"comments"},r.a.createElement(k.a,{id:"Comments"})),r.a.createElement(k.a,{id:"CommentPlaceholder"},(function(t){return r.a.createElement(nt.a.Control,{id:"comments",onChange:e.changeHandlerRoute.bind(e),value:e.state.comments,as:"textarea",rows:"4",placeholder:t})}))),r.a.createElement(Pt,{disabled:this.isEmpty(),toggleText:r.a.createElement(k.a,{id:"Submit"}),onSave:function(){},title:r.a.createElement(k.a,{id:"Submited"}),closeText:r.a.createElement(k.a,{id:"Close"}),handleClose:function(){setTimeout((function(){e.props.loadRoutes()}),3e3),e.setState(e.resetState())},onOpen:this.submitForm.bind(this),change:!0},r.a.createElement("p",null,r.a.createElement(k.a,{id:"SubmitedRoute"})))),r.a.createElement("div",{id:"buttonHolder"},r.a.createElement(Ut,{className:Ft.a.uploadButton,reset:this.state.reset,onChange:this.changeHandlerFiles.bind(this),id:"file",file:!0,text:r.a.createElement(k.a,{id:"UploadButton"})}),r.a.createElement(Ut,{className:Ft.a.uploadButton,reset:this.state.reset,onChange:this.changeHandlerImages.bind(this),id:"images",images:!0,text:r.a.createElement(k.a,{id:"UploadImages"})}))))}}]),a}(r.a.Component),ea=Object(E.b)((function(e){return{routes:e.route.routes,userWebId:e.auth.userWebId}}),(function(e){return{uploadRoute:function(t,a,n){return e(function(e,t,a){return{type:"UPLOAD_ROUTE",payload:{route:e,routes:t,webId:a}}}(t,a,n))},loadRoutes:function(){return e({type:"LOAD_ROUTES_REQUEST",payload:!0})}}}))(Kt),ta=function(){return r.a.createElement("div",{id:"container","data-testid":"page-not-found-container"},r.a.createElement(k.a,{id:"PageNotFound"}))},aa=a(265),na=a.n(aa),ra=a(151),ia=a.n(ra),oa=a(266),sa=a.n(oa);var ca=Object(E.b)((function(e){return{friends:e.user.friends,sharedWith:e.route.selectedRoute.sharedWith,userWebId:e.auth.userWebId}}),(function(e){return{shareRoute:function(t,a){return e(f(t,a))},loadRoutes:function(){return e({type:"LOAD_ROUTES_REQUEST",payload:!0})},clearRoute:function(){return e({type:"CLEAR_ROUTE",payload:null})}}}))((function(e){var t=e.selectedRoute,a=e.shareRoute,i=e.userWebId,o=lt(e.sharedWith),c=Object(n.useState)({friends:dt(e.friends,e.sharedWith).map((function(e){return Object(ut.a)(Object(ut.a)({},e),{},{checked:!1})})),friendsToShareWith:o.map((function(e){return Object(ut.a)(Object(ut.a)({},e),{},{checked:!1})})),shared:!1}),u=Object(s.a)(c,2),l=u[0],d=u[1];Object(n.useEffect)((function(){var t;d(Object(ut.a)(Object(ut.a)({},l),{},{friends:(t=e.sharedWith,dt(e.friends,t).map((function(e){return Object(ut.a)(Object(ut.a)({},e),{},{checked:!1})})))}))}),[e.sharedWith]);var m=function(){var n=Object(v.a)(g.a.mark((function n(){return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:a(t,l.friendsToShareWith||[]),setTimeout(Object(v.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.clearRoute(),e.loadRoutes();case 2:case"end":return t.stop()}}),t)}))),1e3);case 2:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),p=l.friendsToShareWith.filter((function(e){return e.checked})).length,f=p>0?r.a.createElement("span",{"data-testid":"share-route-share-button-numbers"},r.a.createElement(k.a,{id:"Share"}),r.a.createElement(st.a,{className:sa.a.badge,color:"secondary"},r.a.createElement("span",{"data-testid":"share-route-share-button-number"},p))):r.a.createElement("span",{"data-testid":"share-route-share-button-plain"},"Share");return r.a.createElement(Pt,{"data-testid":"share-route-modal",onOpen:function(){},disabled:!function(){var e=i.split("//")[1].split("/")[0];return t.author===e}(),saveDisabled:0===p,toggleText:r.a.createElement(k.a,{id:"Share"}),handleClose:function(){if(!l.shared){var e=l.friends.map((function(e){return Object(ut.a)(Object(ut.a)({},e),{},{checked:!1})}));d(Object(ut.a)(Object(ut.a)({},l),{},{friends:e,friendsToShareWith:[]}))}},onSave:m,title:r.a.createElement(k.a,{"data-testid":"share-modal-title",id:"ShareModalTitle"}),closeText:r.a.createElement(k.a,{id:"Close"}),saveText:f},r.a.createElement(ot,{"data-testid":"share-route-friend-list",onClick:function(e){l.friends[e].checked=!l.friends[e].checked;var t=lt(l.friendsToShareWith),a=lt(l.friends);if(a[e].checked){var n=a[e];t.push(n)}else t.pop(e);d(Object(ut.a)(Object(ut.a)({},l),{},{friendsToShareWith:t,friends:a}))},friends:l.friends,style:{container:sa.a.friendsExpanded,card:sa.a.cardExpanded},checked:!0}))})),ua=(a(995),a(176));var la=Object(E.b)((function(e){return{selectedRoute:e.route.selectedRoute,userWebId:e.auth.userWebId}}),(function(e){return{loadRoutesRequest:function(){return e({type:"LOAD_ROUTES_REQUEST",payload:!0})},clearRoute:function(){return e({type:"CLEAR_ROUTE",payload:null})}}}))((function(e){var t=Object(n.useState)({}),a=Object(s.a)(t,2),i=a[0],o=a[1],c=e.userWebId,u=r.a.createElement("span",{"data-testid":"Leave-Cooment-text"},r.a.createElement(k.a,{id:"LeaveComment"}));return r.a.createElement("div",{className:"GeneralComponent","data-testid":"general-component"},r.a.createElement(Pt,{className:e.style,"data-testid":"Modal-component",disabled:!1,toggleText:r.a.createElement(ua.b,null),title:r.a.createElement(k.a,{id:"CommentsModelTitle",values:{theRoute:i.theRoute}}),closeText:r.a.createElement(k.a,{id:"Close"}),onOpen:function(){o(Object(ut.a)(Object(ut.a)({},i),{},{theRoute:e.selectedRoute.name}))},handleClose:function(){},saveText:u,onSave:function(){if(null!==i.comment&&""!==i.comment){var t="https://"+e.selectedRoute.author+"/viade/comments/"+e.selectedRoute.id+".jsonld";Ne(c,t,i.comment).then((function(t){e.loadRoutesRequest(),e.clearRoute()}))}}},r.a.createElement("form",{id:"myForm","data-testid":"form-component"},r.a.createElement("label",{"data-testid":"label-component"},r.a.createElement(k.a,{id:"Comments"}),r.a.createElement("br",null),r.a.createElement("textarea",{id:"myTextArea","data-testid":"textarea-component",onChange:function(e){o(Object(ut.a)(Object(ut.a)({},i),{},{comment:e.target.value}))}})))))})),da=a(179),ma=a.n(da);function pa(e){var t=e.author,a=e.text,n=e.date;return r.a.createElement("div",{"data-testid":"comment",className:ma.a.comment},r.a.createElement("span",{className:ma.a.metadata},r.a.createElement("p",{className:ma.a.date,"data-testid":"date"},n),r.a.createElement("p",{className:ma.a.author,"data-testid":"author"},t)),r.a.createElement("p",{className:ma.a.text,"data-testid":"text"},a))}var fa=a(562),ha=a.n(fa),Ea=function(e){var t=e.comments.map((function(e,t){return r.a.createElement(pa,{key:t,text:e.text,author:e.author,date:e.dateCreated})}));return r.a.createElement("div",{className:ha.a.comments,"data-testid":"comments"},t)};function ba(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),r=a[0],i=a[1];return Object(n.useEffect)((function(){null!=e&&function(e){return Me.apply(this,arguments)}(e).then((function(e){i(e)}))}),[e]),r}function ga(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),r=a[0],i=a[1];return Object(n.useEffect)((function(){null!=e&&function(e){return We.apply(this,arguments)}(e).then((function(e){i(e)}))}),[e]),r}a(996);var va=r.a.memo((function(e){var t=Object(n.useReducer)((function(e,t){switch(t.type){case"NEXT":return{picture:e.picture+1};case"PREVIOUS":return{picture:e.picture-1};default:return null}}),{picture:0}),a=Object(s.a)(t,2),i=a[0],o=a[1],c=0===i.picture?r.a.createElement("button",{"data-testid":"previous",disabled:!0,onClick:function(){return o({type:"PREVIOUS"})}},r.a.createElement(d.b,null)):r.a.createElement("button",{"data-testid":"previous",onClick:function(){return o({type:"PREVIOUS"})}},r.a.createElement(d.b,null)),u=i.picture===e.images.length-1?r.a.createElement("button",{"data-testid":"next",disabled:!0,onClick:function(){return o({type:"NEXT"})}},r.a.createElement(d.c,null)):r.a.createElement("button",{"data-testid":"next",onClick:function(){return o({type:"NEXT"})}},r.a.createElement(d.c,null)),l=0===e.images.length?"There are no media elements":e.images[i.picture],m=0===e.images.length?null:r.a.createElement("div",{id:"slideshow-buttons"},c,u);return r.a.createElement("div",{id:"slideshow-container"},r.a.createElement("div",{id:"slideshow-photos"},l,m))})),ya=a(206),xa=a.n(ya);var Oa=Object(E.b)((function(e){return{userWebId:e.auth.userWebId,selectedRoute:e.route.selectedRoute}}),(function(e){return{shareRoute:function(t,a){return e(f(t,a))}}}))(r.a.memo((function(e){var t=e.userWebId,a=e.selectedRoute,i=e.shareRoute,o=Object(n.useState)({groups:[]}),c=Object(s.a)(o,2),u=c[0],l=c[1],d=ga(t);Object(n.useEffect)((function(){var e=d.map((function(e){return Object(ut.a)(Object(ut.a)({},e),{},{checked:!1})}));l(Object(ut.a)(Object(ut.a)({},u),{},{groups:e}))}),[d]);var m=u.groups.filter((function(e){return e.checked})).length,p=m>0?r.a.createElement("span",{"data-testid":"share-route-share-button-numbers"},r.a.createElement(k.a,{id:"Share"}),r.a.createElement(st.a,{className:xa.a.badge,color:"secondary"},r.a.createElement("span",{"data-testid":"share-route-share-button-number"},m))):r.a.createElement("span",{"data-testid":"share-route-share-button-plain"},"Share");return r.a.createElement("div",{className:xa.a.groupsContainer},r.a.createElement(Pt,{"data-testid":"share-group-modal",onOpen:function(){},disabled:0===d.length,saveDisabled:!1,toggleText:r.a.createElement(k.a,{id:"ShareGroup"}),handleClose:function(){},onSave:function(){var e=[];u.groups.forEach((function(t){t.friends.forEach((function(t){var a={uri:t,name:t.split("//")[1].split("/")[0]};e.push(a)}))})),i(a,e)},title:r.a.createElement(k.a,{"data-testid":"share-group-modal-title",id:"ShareGroupModalTitle"}),closeText:r.a.createElement(k.a,{id:"Close"}),saveText:p},r.a.createElement(ot,{"data-testid":"share-group-friend-list",onClick:function(e){var t=lt(u.groups),a=[];a=dt(t,a);var n=t[e];n.checked=!n.checked,l(Object(ut.a)(Object(ut.a)({},u),{},{groups:a}))},friends:u.groups,style:{container:xa.a.friendsExpanded,card:xa.a.cardExpanded},checked:!0})))}))),_a=Object(E.b)((function(e){return{userWebId:e.auth.userWebId}}),(function(e){return{deleteRoute:function(t,a){return e(function(e,t){return{type:"DELETE_ROUTE",payload:{route:e,uri:t}}}(t,a))},unshareRoute:function(t,a,n){return e(function(e,t,a){return{type:"UNSHARE_ROUTE",payload:{authorWebId:e,routeId:t,userWebId:a}}}(t,a,n))}}}))((function(e){var t=e.selectedRoute,a=e.deleteRoute,i=e.userWebId,o=e.unshareRoute,c=function(e){var t=Object(n.useState)([]),a=Object(s.a)(t,2),r=a[0],i=a[1];return Object(n.useEffect)((function(){null!=e&&i(e.comments)}),[e]),r}(t);if(null!==t){var u=function(){var e=i.split("//")[1].split("/")[0];return t.author===e},l=t.media.map((function(e,t){return r.a.createElement("img",{key:t,src:e,alt:"something"})})),d=r.a.createElement(Ea,{comments:c}),m=function(){var e=u()?"Delete":"Unshare";return r.a.createElement(k.a,{id:e})},p=t.description?t.description:r.a.createElement(k.a,{id:"NoDescription"}),f=l?r.a.createElement(va,{images:l}):r.a.createElement(k.a,{id:"NoImages"});return r.a.createElement("div",{className:e.style?e.style:ia.a.details},r.a.createElement("div",{className:ia.a.description},r.a.createElement("h3",null,r.a.createElement(k.a,{id:"Description"})),r.a.createElement("p",{"data-testid":"route-details-description"},p)),r.a.createElement("div",{className:ia.a.images},r.a.createElement("h3",null,r.a.createElement(k.a,{id:"Images"})),r.a.createElement("p",{className:"route-details-images","data-testid":"route-details-images"},f)),r.a.createElement("div",{className:ia.a.buttons},r.a.createElement(Pt,{id:"deleteButton","data-testid":"route-details-button-delete",onOpen:function(){},disabled:!1,toggleText:m(),title:r.a.createElement(k.a,{id:"DeleteTitle"}),handleClose:function(){},onSave:function(){return u()?a(t,i):o(t.author,t.id,i)},closeText:r.a.createElement(k.a,{id:"Close"}),saveText:m()},r.a.createElement(k.a,{id:"DeleteMessage"})),r.a.createElement(ca,{"data-testid":"route-details-button-share",id:"shareButton",selectedRoute:t},r.a.createElement(k.a,{id:"Share"})),r.a.createElement(Oa,null)),r.a.createElement("div",{className:ia.a.comments},r.a.createElement("h3",null,r.a.createElement(k.a,{id:"CommentsTitle"})),d,r.a.createElement(la,{style:ia.a.commentsButton,"data-testid":"Comments-button"})))}return r.a.createElement("div",null)}));var ka=Object(E.b)((function(e){return{routes:e.route.routes,selectedRoute:e.route.selectedRoute}}),(function(e){return{showRoute:function(t){return e(h(t))}}}))((function(e){var t=e.routes,a=e.selectedRoute,n=e.showRoute;return r.a.createElement("div",{className:na.a.routesContainer},r.a.createElement(ze.a,null,r.a.createElement(St,{"data-testid":"myRoutes-route-list",style:na.a.routeList,currentMap:a,routes:t,onClick:n}),r.a.createElement(_a,{"data-testid":"myRoutes-route-details",style:na.a.routeDetails,selectedRoute:a})),r.a.createElement(Xe.a,null,r.a.createElement(Qe.c,{to:"/"})))})),Ra=a(180),ja=a.n(Ra),wa=a(1114);var Sa=Object(E.b)((function(e){return{locale:e.localeReducer}}),(function(e){return{changeLanguage:function(t){return e(function(e){return{type:"CHANGE_LOCALE_LANGUAGE_SUCCESS",payload:e}}(t))}}}))(r.a.memo((function(e){var t=e.changeLanguage,a=e.locale,n=function(e){t(e)};return r.a.createElement("div",{className:ja.a.settings},r.a.createElement("h2",{className:ja.a.settingsTitle,"data-testid":"settings-title"},r.a.createElement(k.a,{id:"SettingsTitle"})),r.a.createElement("div",{className:ja.a.language},r.a.createElement("h2",{"data-testid":"settings-language"},r.a.createElement(k.a,{id:"Language"})),r.a.createElement(wa.a,{"data-testid":"settings-language-dropdown",id:"dropdown-basic-button",title:r.a.createElement(k.a,{id:a.id})},r.a.createElement(C.a.Item,{"data-testid":"settings-language-english",onClick:function(){n({id:"English",text:"English",locale:"en"})},href:"#"},r.a.createElement(k.a,{id:"English"})),r.a.createElement(C.a.Item,{"data-testid":"settings-language-spanish",onClick:function(){n({id:"Spanish",text:"Spanish",locale:"es"})},href:"#"},r.a.createElement(k.a,{id:"Spanish"})))),r.a.createElement("div",{className:ja.a.technicalInfo},r.a.createElement("h2",null,r.a.createElement(k.a,{id:"Technical"})),r.a.createElement("p",null,r.a.createElement(k.a,{id:"TechnicalDescription"}),r.a.createElement("a",{href:"https://arquisoft.github.io/viade_en1b/docs/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(k.a,{id:"ThisPage"})))),r.a.createElement("div",{className:ja.a.howToUse},r.a.createElement("h2",null,r.a.createElement(k.a,{id:"HowToUse"})),r.a.createElement("p",null,r.a.createElement(k.a,{id:"HowToUseDescription"})," ",r.a.createElement("br",null),r.a.createElement("a",{href:"https://lamasumas.github.io/Solid/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(k.a,{id:"Here"})))))})));a(997);function Ca(e){var t=e.notification;return r.a.createElement(at.a,{"data-testid":"notification-card",className:"notification",onClick:function(){}},r.a.createElement(at.a.Body,{className:"notificationCardBody"},r.a.createElement(at.a.Text,{"data-testid":"notification-card-text",className:"notificationText"},t.text)))}var La=a(152),Ta=a.n(La);function Na(e){var t=e.userWebId,a=e.loadRoutes,n=ba(t),i=n.map((function(e,t){return r.a.createElement(Ca,{"data-testid":"notification",key:t,notification:e})}));return r.a.createElement("div",{"data-testid":"notificationslist-div",className:Ta.a.notificationsListContainer?Ta.a.notificationsListContainer:"notification-list-div"},r.a.createElement("h1",null,r.a.createElement(k.a,{id:"Notifications"})),r.a.createElement("div",{"data-testid":"notificationslist-divcomponent",className:0===n.length?Ta.a.notificationsEmpty:Ta.a.notificationsList},0===n.length?r.a.createElement(ua.a,null):i)," ",r.a.createElement("div",{className:0===n.length?Ta.a.acceptAllButtonDisabled:Ta.a.acceptAllButton},r.a.createElement(Pt,{"data-testid":"notificationslist-button",onOpen:function(){(function(e){return Te.apply(this,arguments)})(t).then((function(e){a()}))},disabled:!1,toggleText:r.a.createElement(k.a,{id:"Accepts"}),handleClose:function(){},onSave:function(){},closeText:r.a.createElement(k.a,{id:"Close"})},r.a.createElement(k.a,{id:"AcceptsMessage"}))))}var Aa=Object(E.b)((function(e){return{userWebId:e.auth.userWebId}}),(function(e){return{loadRoutes:function(){return e({type:"LOAD_ROUTES_REQUEST",payload:!0})}}}))((function(e){return r.a.createElement("div",{"data-testid":"notifications-div"},r.a.createElement(Na,{userWebId:e.userWebId,loadRoutes:e.loadRoutes,"data-testid":"notifications-list",props:e}))})),Ia=a(181),Da=a.n(Ia),Fa=a(323),Ua=a.n(Fa);function Ma(e){var t=ga(e.userWebId),a=0===t.length?r.a.createElement("span",{className:Ua.a.noGroupsContainer},r.a.createElement(ua.c,null),r.a.createElement(k.a,{id:"NoGroups"})):t.map((function(e,t){return r.a.createElement("li",{key:t},e.name)}));return r.a.createElement("div",{className:Ua.a.groupListContainer},r.a.createElement("h1",null,"Groups"),r.a.createElement("ul",null,a),r.a.createElement("div",{className:"buttons"}))}var Pa=Object(E.b)((function(e){return{userWebId:e.auth.userWebId,friends:e.user.friends}}))((function(e){var t=Object(n.useState)({friends:[],groupName:""}),a=Object(s.a)(t,2),i=a[0],o=a[1];Object(n.useEffect)((function(){var t=e.friends.map((function(e){return Object(ut.a)(Object(ut.a)({},e),{},{checked:!1})}));o(Object(ut.a)(Object(ut.a)({},i),{},{friends:t}))}),[e.friends]);var c=i.friends.filter((function(e){return e.checked})).length,u=c>0?r.a.createElement("span",{"data-testid":"share-route-share-button-numbers"},r.a.createElement(k.a,{id:"CreateGroup"}),r.a.createElement(st.a,{className:Da.a.badge,color:"secondary"},r.a.createElement("span",{"data-testid":"share-route-share-button-number"},c))):r.a.createElement("span",{"data-testid":"share-route-share-button-plain"},r.a.createElement(k.a,{id:"CreateGroup"})),l=function(e){o(Object(ut.a)(Object(ut.a)({},i),{},{groupName:e.target.value}))};return r.a.createElement("div",{className:Da.a.groupsContainer},r.a.createElement(Ma,{userWebId:e.userWebId}),r.a.createElement(Pt,{"data-testid":"create-group-modal",onOpen:function(){},disabled:!1,saveDisabled:!1,toggleText:r.a.createElement(k.a,{id:"CreateGroup"}),handleClose:function(){},onSave:function(){var t=i.friends.filter((function(e){return e.checked})).map((function(e){return e.uri}));!function(e,t,a){qe.apply(this,arguments)}(e.userWebId,i.groupName,t)},title:r.a.createElement(k.a,{"data-testid":"create-group-modal-title",id:"CreateGroupModalTitle"}),closeText:r.a.createElement(k.a,{id:"Close"}),saveText:u},r.a.createElement(nt.a,{className:Da.a.form},r.a.createElement(nt.a.Group,null,r.a.createElement(k.a,{id:"CreateGroupFormPlaceholder"},(function(e){return r.a.createElement(nt.a.Control,{value:i.groupName,onChange:l,type:"text",placeholder:e})})))),r.a.createElement(ot,{"data-testid":"create-group-friend-list",onClick:function(e){var t=lt(i.friends),a=[];a=dt(t,a);var n=t[e];n.checked=!n.checked,o(Object(ut.a)(Object(ut.a)({},i),{},{friends:a}))},friends:i.friends,style:{container:Da.a.friendsExpanded,card:Da.a.cardExpanded},checked:!0})))}));function Ga(e){var t=e.navBar;return r.a.createElement($e.HashRouter,null,t,r.a.createElement(Qe.g,null,r.a.createElement(Qe.d,{exact:!0,path:"/404",component:ta}),r.a.createElement(Qe.d,{exact:!0,path:"/",render:function(e){return r.a.createElement(Ze,e)}}),r.a.createElement(Qe.d,{exact:!0,path:"/profile",render:function(){return r.a.createElement(pt,e)}}),r.a.createElement(Qe.d,{exact:!0,path:"/notifications",render:function(){return r.a.createElement(Aa,e)}}),r.a.createElement(Qe.d,{exact:!0,path:"/dashboard",render:function(){return r.a.createElement(Ct,e)}}),r.a.createElement(Qe.d,{exact:!0,path:"/routes/upload",render:function(){return r.a.createElement(ea,e)}}),r.a.createElement(Qe.d,{exact:!0,path:"/settings",render:function(){return r.a.createElement(Sa,Object.assign({},e,{changeTheme:function(){},changeLanguage:function(){}}))}}),r.a.createElement(Qe.d,{exact:!0,path:"/profile/groups",render:function(){return r.a.createElement(Pa,null)}}),r.a.createElement(Qe.d,{exact:!0,path:"/routes/MyRoutes",render:function(){return r.a.createElement(ka,e)}}),r.a.createElement(Qe.d,{exact:!0,path:"/routes/shareRoute",render:function(){return r.a.createElement(ca,e)}}),r.a.createElement(Qe.c,{to:"/404"})))}var Wa=a(267),Ba=a(325),Ha=a(563),qa=(a(998),function(){return r.a.createElement("div",{"data-testid":"footer",id:"footer"},r.a.createElement("div",{className:"footerElement"},r.a.createElement("b",{"data-testid":"footer-dev"},r.a.createElement(k.a,{id:"DevTeam"})," ")," Viade_en1b"," "),r.a.createElement("div",{className:"footerElement"},r.a.createElement("a",{"data-testid":"footer-github",href:"https://github.com/Arquisoft/viade_en1b",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(Wa.a,{id:"githubIcon",icon:Ba.a}))),r.a.createElement("div",{className:"footerElement"},r.a.createElement("a",{"data-testid":"footer-react",href:"https://lamasumas.github.io/Solid/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(Wa.a,{id:"githubIcon",icon:Ha.a}))),r.a.createElement("div",{className:"footerElement"},r.a.createElement("a",{"data-testid":"footer-react",href:"https://reactjs.org/",target:"_blank",rel:"noopener noreferrer"},r.a.createElement(Wa.a,{id:"githubIcon",icon:Ba.b}))))}),Ja=a(1117),Va={en:{Dashboard:"Dashboard",MyRoutes:"My Routes",UploadRoute:"Upload routes",MyProfile:"My Profile",Settings:"Settings",LogOut:"Log Out",Themes:"Themes",FriendsList:"Friends list:",Greetings:"Hello",SolidProfile:"Solid profile",Routes:"Routes",SharedRoutes:"Shared routes",CEO:"CEO",DevTeam:"Dev team:",RoutesList:"Routes List",By:"by",Comments:"Comment:",LeaveComment:"Leave a comment",Close:"Close",CommentsModelTitle:"Write a comment for {theRoute} route ",CommentsButtonTitle:"Comment",LoginTitle:"Manage your routes like never before.",LoginParagraph:"A new descentralized system where your information is truly yours.",LoginButtonTitle:"Login",LoginButton:"Login here!",LogoutButton:"Log me out",PageNotFound:"Sorry, page not found!",SettingsTitle:"Settings",Language:"Languages",English:"English",Spanish:"Spanish",LanguageAvailable:"Available Languages",Technical:"Technical information",TechnicalDescription:"If you are interested on how our project was planned and how it was built you can visit",ThisPage:"THIS PAGE",HowToUse:"How to use this application / About us",HowToUseDescription:"As you might have any doubt of how to use this application or you might want to know more about us, we have created a support webpage for these two purpose.",Here:"Here is the webpage.",NoMediaElements:"There are no media elements",NoDescription:"There is not description for this route",Description:"Description",Images:"Images",NoImages:"There is not any images for this route",Videos:"Videos",NoVideos:"There is not any videos for this route",Delete:"Delete",Unshare:"Unshare",Share:"Share",CommentsTitle:"Comments",DeleteTitle:"Confirmation",DeleteMessage:"Are you sure you want to delete this route?",NoRoutes:"Your routes will be displayed here",ShareModalTitle:"Pick some friends",NameOfTheRoute:"Name of the route",RouteNamePlaceholder:"Route name",DescriptionPlaceholder:"Add a description",CommentPlaceholder:"Add a comment",SubmitedRoute:"Your route has been submited",Submited:"Submited",UploadButton:"Choose a route",UploadImages:"Choose images",UploadVideos:"Choose videos",Submit:"Submit",CreateGroup:"Create",CreateGroupModalTitle:"Create group",CreateGroupFormPlaceholder:"Group name",NoGroups:"You have no groups. Created groups will be displayed here",MyGroups:"My groups",ShareGroup:"Share to group",ShareGroupModalTitle:"Pick some groups",Notifications:"Notifications",Accepts:"Accept all",AcceptsMessage:"Now you can see all the routes that your friends had shared with you"},es:{Dashboard:"Mapa",MyRoutes:"Mis Rutas",UploadRoute:"Subir Ruta",MyProfile:"Mi Perfil",Settings:"Ajustes",LogOut:"Cerrar sesion",Themes:"Temas",FriendsList:"Lista de amigos:",Greetings:"Hola",SolidProfile:"Perfil de Solid",Routes:"Rutas",SharedRoutes:"Rutas compartidas",CEO:"CEO",DevTeam:"Equipo de desarrollo:",RoutesList:"Lista de rutas",By:"por",Comments:"Comentario:",LeaveComment:"Dejar un comentario",Close:"Cerrar",CommentsModelTitle:"Escribe un comentario para la ruta {theRoute} ",CommentsButtonTitle:"Comentar",LoginTitle:"Administras tus rutas como nunca antes.",LoginParagraph:"Un nuevo sistema descentralizado donde tu informacion es tuya de verdad.",LoginButtonTitle:"Iniciar sesion",LoginButton:"Entrar aqu\xed!",LogoutButton:"Salir de aqu\xed",PageNotFound:"Sorry, page not found!",SettingsTitle:"Ajustes",Language:"Idiomas",English:"Ingl\xe9s",Spanish:"Espa\xf1ol",LanguageAvailable:"Idiomas Disponibles",Technical:"Informaci\xf3n t\xe9cnica",TechnicalDescription:"Si est\xe1s interesado en como se planeo y se construyo nuestra aplicaci\xf3n puedes visitar",ThisPage:"ESTA P\xc1GINA",HowToUse:"Como usar esta aplicaci\xf3n / Nuestro equipo",HowToUseDescription:"Si te ha surgido alguna duda sobre como usar esta aplicaci\xf3n o quieres saber m\xe1s sobre quienes somos, hemos creado una p\xe1gina web extra para esto.",Here:"Aqui esta la pagina web",NoMediaElements:"No hay im\xe1genes",NoDescription:" No hay ninguna descripci\xf3n para esta ruta",NoImages:"No hay imagenes para esta ruta",Description:"Descripci\xf3n",Images:"Im\xe1genes",Videos:"V\xeddeos",NoVideos:"No hay v\xeddeos para esta ruta",Delete:"Borrar",Unshare:"Descompartir",Share:"Compartir",CommentsTitle:"Comentarios",DeleteTitle:"Confirmaci\xf3n",DeleteMessage:"\xbfEstas seguro de querer borrar la ruta?",NoRoutes:"Tus rutas se mostraran aqu\xed",ShareModalTitle:"Escoge alg\xfan amigo",NameOfTheRoute:"Nombre de la ruta",RouteNamePlaceholder:"Escribe el nombre de la ruta",DescriptionPlaceholder:"Escribe una descripci\xf3n",CommentPlaceholder:"Escribe un comentario",SubmitedRoute:"Tu ruta a sido enviada",Submited:"Enviado",UploadButton:"Escoge una ruta",UploadImages:"Escoge im\xe1genes",UploadVideos:"Escoge v\xeddeos",Submit:"Enviar",CreateGroup:"Crear",CreateGroupModalTitle:"Crear Grupo",CreateGroupFormPlaceholder:"Nombre del grupo",NoGroups:"No tienes grupos. Los grupos creados te aparecer\xe1n aqu\xed",ShareGroup:"Compartir con grupo",ShareGroupModalTitle:"Escoge alg\xfan grupo",MyGroups:"Mis grupos",Notifications:"Notificaciones",Accepts:"Aceptar todas",AcceptsMessage:"Ya puedes ver las rutas que te han compartido tus amigos"}},$a=a(9),Qa=function(e){var t=Object(n.useState)(R.purple),a=Object(s.a)(t,2),i=a[0],o=a[1],c=e.locale;Object(n.useEffect)((function(){Object.keys(i).map((function(e){var t=i[e];return document.documentElement.style.setProperty(e,t)}))}));var u=!0===Object(Ve.a)()?r.a.createElement(Je,{"data-testid":"theNavBar",brandName:"ViaDe_en1b"}):null;return r.a.createElement(Ja.a,{key:c,locale:c,messages:Va[e.locale]},r.a.createElement(j.Provider,{value:{theme:i,changeTheme:o}},r.a.createElement("div",{"data-testid":"theApp",className:"App"},r.a.createElement(Ga,{navBar:u}),r.a.createElement(qa,null))))};Qa.protoTypes={locale:a.n($a).a.string};var Xa=Object(E.b)((function(e){return{locale:e.localeReducer.locale}}))(Qa),Ya=(a(999),a(146)),za={userWebId:null},Za=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:za,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_WEB_ID":return Object(ut.a)(Object(ut.a)({},e),{},{userWebId:t.payload});default:return e}},Ka={routes:[],selectedRoute:null,routesLoading:!1,routesError:null},en=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ka,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_ROUTE":return Object(ut.a)(Object(ut.a)({},e),{},{selectedRoute:t.payload});case"UPLOAD_ROUTE":var a=t.payload.webId,n=t.payload.route,r=n.sharedWith?n.sharedWith:[],i=n.comments,o={name:n.name,description:n.description,author:a.split("//")[1].split("/")[0],positions:n.positions,images:n.images,videos:n.videos,sharedWith:r,comments:i};return Ie(o,t.payload.webId),Object(ut.a)({},e);case"DELETE_ROUTE":Fe(t.payload.route.id,t.payload.uri);var s=e.routes.filter((function(e){return e.id!==t.payload.route.id}));return Object(ut.a)(Object(ut.a)({},e),{},{routes:s,selectedRoute:null});case"CLEAR_ROUTE":return Object(ut.a)(Object(ut.a)({},e),{},{selectedRoute:t.payload});case"SHARE_ROUTE":var c=t.payload.friends;return c[0]&&O().then((function(e){c.forEach((function(a){we(e,te(e)+t.payload.route.id+".jsonld",a.uri,e.split("//")[1].split(".")[0],a.name)}))})),Object(ut.a)({},e);case"UNSHARE_ROUTE":Pe(t.payload.authorWebId,t.payload.routeId,t.payload.userWebId);var u=e.routes.filter((function(e){return e.id!==t.payload.routeId}));return Object(ut.a)(Object(ut.a)({},e),{},{routes:u,selectedRoute:null});case"LOAD_ROUTES_REQUEST":return Object(ut.a)(Object(ut.a)({},e),{},{routesLoading:t.payload});case"LOAD_ROUTES_SUCCESS":return Object(ut.a)(Object(ut.a)({},e),{},{routes:t.payload,routesLoading:!1});case"LOAD_ROUTES_ERROR":return Object(ut.a)(Object(ut.a)({},e),{},{routesError:t.payload});default:return e}},tn={email:null,emailLoading:!1,emailError:null,friends:[],friendsLoading:!1,friendsError:null},an=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_EMAIL_REQUEST":return Object(ut.a)(Object(ut.a)({},e),{},{emailLoading:t.payload});case"LOAD_EMAIL_ERROR":return Object(ut.a)(Object(ut.a)({},e),{},{emailError:t.payload});case"LOAD_EMAIL_SUCCESS":return Object(ut.a)(Object(ut.a)({},e),{},{emailLoading:!1,email:t.payload});case"LOAD_FRIENDS_REQUEST":return Object(ut.a)(Object(ut.a)({},e),{},{friendsLoading:t.payload});case"LOAD_FRIENDS_SUCCESS":return Object(ut.a)(Object(ut.a)({},e),{},{friendsLoading:!1,friends:t.payload});case"LOAD_FRIENDS_ERROR":return Object(ut.a)(Object(ut.a)({},e),{},{friendsLoading:!1,friendsError:t.payload});default:return e}},nn={loaded:!1},rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nn,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD":return Object(ut.a)(Object(ut.a)({},e),{},{loaded:t.payload});default:return e}},on=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{id:"English",text:"English",locale:"en"},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"CHANGE_LOCALE_LANGUAGE_SUCCESS":return Object(ut.a)(Object(ut.a)({},e),{},{id:t.payload.id,text:t.payload.text,locale:t.payload.locale});default:return e}},sn=Object(Ya.c)({auth:Za,route:en,user:an,control:rn,localeReducer:on}),cn=a(326),un=a(43),ln=a(178);function dn(){return(dn=Object(v.a)(g.a.mark((function e(){return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){ln.a.user["http://www.w3.org/2006/vcard/ns#hasEmail"].value.then((function(a){ln.a[a].vcard_value.value.then((function(t){var a=t.split(":");e(a[1])})).catch((function(e){return t(e)}))})).catch((function(e){return t(e)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var mn=a(327),pn=function(e){return function(t){return function(a){switch(a.type){case"LOAD_ROUTES_REQUEST":var n=e.getState().auth.userWebId;n&&function(e){return je.apply(this,arguments)}(n).then((function(t){e.dispatch(function(e){return{type:"LOAD_ROUTES_SUCCESS",payload:e}}(t))})).catch((function(t){e.dispatch(function(e){return{type:"LOAD_ROUTES_ERROR",payload:e}}(t))}))}t(a)}}},fn=function(e){return function(t){return function(a){switch(a.type){case"LOAD_EMAIL_REQUEST":(function(){return dn.apply(this,arguments)})().then((function(t){e.dispatch(function(e){return{type:"LOAD_EMAIL_SUCCESS",payload:e}}(t))})).catch((function(t){return e.dispatch(function(e){return{type:"LOAD_EMAIL_ERROR",payload:e}}(t.message))}));break;case"LOAD_FRIENDS_REQUEST":var n=e.getState().auth.userWebId;n&&Object(mn.getFriends)(n).then((function(t){var a=Object(un.a)(t).map((function(e){return e.object.value})),n=Object(un.a)(a);n=n.map((function(e){return Object(mn.getName)(e)})),Promise.all(n).then((function(t){var r=[];n=t.map((function(e){return null===e?"noName":e.value}));for(var i=0;i<n.length;i++){var o={name:n[parseInt(i)],uri:a[parseInt(i)]};r.push(o)}e.dispatch({type:"LOAD_FRIENDS_SUCCESS",payload:r})}))})).catch((function(e){}))}t(a)}}},hn=[cn.a,pn,fn],En=(cn.a,Ya.a.apply(void 0,hn)(Ya.d)(sn));o.a.render(r.a.createElement(E.a,{store:En},r.a.createElement(Xa,null)),document.getElementById("root"))},150:function(e,t,a){e.exports={dashboard:"Dashboard_dashboard__3b5AM",mapContainer:"Dashboard_mapContainer__3ceaO",myMap:"Dashboard_myMap__2_0fO",routeList:"Dashboard_routeList__aygv0",titleHolder:"Dashboard_titleHolder__2MPlO"}},151:function(e,t,a){e.exports={buttons:"RouteDetails_buttons__lQfSi",images:"RouteDetails_images__1zk2c",comments:"RouteDetails_comments__2jx6I",description:"RouteDetails_description__31qGN"}},152:function(e,t,a){e.exports={notificationsListContainer:"NotificationsList_notificationsListContainer__1X_OU",notificationsList:"NotificationsList_notificationsList__wHh_c",acceptAllButton:"NotificationsList_acceptAllButton__nM9us",card:"NotificationsList_card__xHkWv",notificationsEmpty:"NotificationsList_notificationsEmpty__1YTuw",acceptAllButtonDisabled:"NotificationsList_acceptAllButtonDisabled__oto04"}},179:function(e,t,a){e.exports={comment:"Comment_comment__1x_RP",metadata:"Comment_metadata__1rKZD",text:"Comment_text__3Qn7G",date:"Comment_date__3HGAb",author:"Comment_author__1mTZg"}},180:function(e,t,a){e.exports={settings:"Settings_settings__9osGg",settingsTitle:"Settings_settingsTitle__3JWyI",technicalInfo:"Settings_technicalInfo__3erAP",language:"Settings_language__v8_PR",howToUse:"Settings_howToUse__2SoxZ"}},181:function(e,t,a){e.exports={badge:"Groups_badge__1IZRH",friendsExpanded:"Groups_friendsExpanded__3in6o",cardExpanded:"Groups_cardExpanded__2FMVb",form:"Groups_form__39aHe"}},205:function(e,t,a){e.exports={uploadContainer:"UploadRoute_uploadContainer__zqnRD",form:"UploadRoute_form__2sYlw",uploadLabel:"UploadRoute_uploadLabel___MjA5",buttonHolder:"UploadRoute_buttonHolder__2L7Pk",uploadButton:"UploadRoute_uploadButton__3P2cL","form-info":"UploadRoute_form-info__rls2L","form-group":"UploadRoute_form-group__1fqnv",footer:"UploadRoute_footer__1XtuE"}},206:function(e,t,a){e.exports={friendsExpanded:"ShareRouteGroup_friendsExpanded__24yE0",cardExpanded:"ShareRouteGroup_cardExpanded__1hDy9",badge:"ShareRouteGroup_badge__1wwYJ"}},265:function(e,t,a){e.exports={routesContainer:"MyRoutes_routesContainer__44ADy",routeDetails:"MyRoutes_routeDetails__mv4MH",routeList:"MyRoutes_routeList__3UxFV",commentsButton:"MyRoutes_commentsButton__18nh7"}},266:function(e,t,a){e.exports={friendsExpanded:"ShareRoute_friendsExpanded__1YRiu",cardExpanded:"ShareRoute_cardExpanded__2jrba",badge:"ShareRoute_badge__evH6h"}},322:function(e,t,a){e.exports={routeList:"RouteList_routeList__3z0Yr",noRoutes:"RouteList_noRoutes__37WEv"}},323:function(e,t,a){e.exports={groupListContainer:"GroupList_groupListContainer__1PeFL",noGroupsContainer:"GroupList_noGroupsContainer__7crgB"}},550:function(e,t,a){e.exports={picker:"ThemePicker_picker__1VNR3"}},555:function(e,t,a){},562:function(e,t,a){e.exports={comments:"CommentsList_comments__3FEAJ"}},571:function(e,t,a){e.exports=a(1102)},576:function(e,t,a){},577:function(e,t,a){},590:function(e,t,a){},591:function(e,t,a){},616:function(e,t){},618:function(e,t){},642:function(e,t){},689:function(e,t){},690:function(e,t){},855:function(e,t){},857:function(e,t){},885:function(e,t){},886:function(e,t){},972:function(e,t,a){},975:function(e,t,a){},995:function(e,t,a){},996:function(e,t,a){},997:function(e,t,a){},998:function(e,t,a){},999:function(e,t,a){}},[[571,1,2]]]);